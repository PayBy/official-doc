"use strict";(self.webpackChunkdeveloper_official_site=self.webpackChunkdeveloper_official_site||[]).push([[7799],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=a,y=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return n?r.createElement(y,o(o({ref:t},p),{},{components:n})):r.createElement(y,o({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},22386:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(83117),a=(n(67294),n(3905));n(8209);const i={sidebar_position:90,toc_max_heading_level:6},o="Best Practices of Payment Flow",s={unversionedId:"Online Payment Integration/best-practice",id:"Online Payment Integration/best-practice",title:"Best Practices of Payment Flow",description:"System Integration Overview",source:"@site/docs/1_Online Payment Integration/best-practice.md",sourceDirName:"1_Online Payment Integration",slug:"/Online Payment Integration/best-practice",permalink:"/docs/Online Payment Integration/best-practice",draft:!1,tags:[],version:"current",sidebarPosition:90,frontMatter:{sidebar_position:90,toc_max_heading_level:6},sidebar:"tutorialSidebar",previous:{title:"Cash Top Up",permalink:"/docs/Online Payment Integration/Special Payment Scenes/cash-top-up"},next:{title:"Test Cases",permalink:"/docs/Online Payment Integration/test-case"}},l={},c=[{value:"System Integration Overview",id:"system-integration-overview",level:2},{value:"Standard Payment Flow",id:"standard-payment-flow",level:2},{value:"Order Initialization",id:"order-initialization",level:3},{value:"Asynchronous Processing",id:"asynchronous-processing",level:3},{value:"Payment Re-initiation",id:"payment-re-initiation",level:2},{value:"Order Status Retrieval",id:"order-status-retrieval",level:2},{value:"When to Query Order Status",id:"when-to-query-order-status",level:3},{value:"Query Implementation",id:"query-implementation",level:3},{value:"Order Cancellation",id:"order-cancellation",level:2},{value:"When to Cancel Orders",id:"when-to-cancel-orders",level:3},{value:"Best Practices",id:"best-practices",level:3}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"best-practices-of-payment-flow"},"Best Practices of Payment Flow"),(0,a.kt)("h2",{id:"system-integration-overview"},"System Integration Overview"),(0,a.kt)("p",null,"The PayBy payment system integrates with merchant systems through three primary interactions:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Order Creation")," - Merchant server initiates payment requests via the order creation API"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Status Inquiry")," - Merchant server queries order status through the status endpoint"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Payment Notifications")," - Merchant server receives asynchronous payment result notifications")),(0,a.kt)("h2",{id:"standard-payment-flow"},"Standard Payment Flow"),(0,a.kt)("h3",{id:"order-initialization"},"Order Initialization"),(0,a.kt)("p",null,"All payment processing begins with order creation using the Order Creation API. Each order requires a unique merchant order number that follows these specifications:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Character Set"),": Letters, numbers, hyphens (-), and underscores (_) only"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Uniqueness"),": Must be unique per merchant account"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Format Recommendation"),": Current timestamp combined with random sequence")),(0,a.kt)("h3",{id:"asynchronous-processing"},"Asynchronous Processing"),(0,a.kt)("p",null,"PayBy processes payments asynchronously after order creation. This architecture provides:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Non-blocking Operations"),": Merchants are not required to maintain persistent connections"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Enhanced Scalability"),": Supports higher concurrent request volumes"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Flexible Integration"),": Results delivered via notifications or periodic queries")),(0,a.kt)("p",null,"Payment results are communicated through two methods:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Push Notifications"),": Automatic notifications sent to merchant endpoints upon payment completion"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Status Queries"),": Merchant-initiated periodic status checks via the query API")),(0,a.kt)("h2",{id:"payment-re-initiation"},"Payment Re-initiation"),(0,a.kt)("p",null,"When re-initiating failed payments, use the original merchant order number to prevent duplicate transactions. Note that successfully paid or canceled orders cannot be reopened. This constraint ensures audit trail integrity and dispute resolution clarity."),(0,a.kt)("h2",{id:"order-status-retrieval"},"Order Status Retrieval"),(0,a.kt)("h3",{id:"when-to-query-order-status"},"When to Query Order Status"),(0,a.kt)("p",null,"The status query endpoint supports inquiries for all order types (payment, refund, transfer). Proactive status polling is recommended in these scenarios:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"System Maintenance"),": When merchant servers undergo maintenance or experience outages that prevent notification receipt"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Error Handling"),": When payment API calls return system errors or unknown transaction statuses  "),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Pre-creation Validation"),": To verify payment status before initiating new orders via the Order Creation API")),(0,a.kt)("h3",{id:"query-implementation"},"Query Implementation"),(0,a.kt)("p",null,"Merchants should implement periodic status queries to determine appropriate next steps in the payment workflow, even when notification delivery is expected."),(0,a.kt)("h2",{id:"order-cancellation"},"Order Cancellation"),(0,a.kt)("h3",{id:"when-to-cancel-orders"},"When to Cancel Orders"),(0,a.kt)("p",null,"Order cancellation maintains payment history integrity and prevents duplicate charges. Cancel orders in these situations:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Timeout Scenarios"),": When order creation requests exceed acceptable processing time windows. Query order status first, then cancel if confirmed as timed out.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Pre-reinitiation Cleanup"),": Before creating replacement orders, cancel the previous order regardless of its apparent status.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"User Abandonment"),": When users fail to complete payment after order creation (e.g., declining payment prompts). Cancel the incomplete order before creating a replacement."))),(0,a.kt)("h3",{id:"best-practices"},"Best Practices"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Always query order status before cancellation to confirm current state"),(0,a.kt)("li",{parentName:"ul"},"Cancel incomplete orders before initiating new payment attempts"),(0,a.kt)("li",{parentName:"ul"},"Maintain cancellation logs for audit and reconciliation purposes")))}u.isMDXComponent=!0},8209:(e,t,n)=>{n(67294)}}]);