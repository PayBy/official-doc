---
sidebar_position: 2
toc_max_heading_level: 6
---

# VAM Deposit Notification

## Overview

When a VAM deposit occurs, PayBy sends the relevant deposit information to the merchant via a data stream. The merchant must process the notification and respond according to the specifications outlined in this document.

> Note:

> 1. Duplicate Notifications: The same notification may be sent multiple times. Merchant systems must be able to handle duplicate notifications correctly. 
> 2. Retry Mechanism: If PayBy does not receive a valid response or if the response times out, the notification is considered failed and will be retried. The default retry schedule is as follows (in minutes): `2, 10, 10, 60, 120, 360, 900`. However, successful delivery is not guaranteed.
> 3. Order Status Uncertainty: If the order status is unclear or the merchant has not received a payment result notification from PayBy, it is recommended to actively query the order status using the designated API.


## Notification Payload

### HTTP Header

- **Content-Type** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
  - Specifies the media type and character encoding of the request body.  
  - Example value: `"application/json; charset=UTF-8"`

### HTTP Body

- **notify_time** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
  - Time when the notification was sent, in `yyyyMMddHHmmss` format.  
  - Example value: `"20241224061738"`

- **vamDepositOrder** <font color='#7d8793'>Object</font> <font color='#f19938'>Required</font>  
  - Object containing deposit order details.

  - **remitterInfo** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
    - Name of the person sending the deposit.  
    - Example value: `"MR HUA JIANG"`

  - **amount** <font color='#7d8793'>Object</font> <font color='#f19938'>Required</font>  
    - Object containing the deposit amount and currency.

    - **amount** <font color='#7d8793'>Number</font> <font color='#f19938'>Required</font>  
      - Numeric value of the deposit.  
      - Example value: `3000`

    - **currency** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
      - Currency code of the deposit.  
      - Example value: `"AED"`

  - **orderNo** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
    - Unique identifier for the deposit order.  
    - Example value: `"131727701521486397"`

  - **referenceNo** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
    - Reference number for tracking or reconciliation.  
    - Example value: `"UFOC0HQ008"`

  - **senderBankCode** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
    - SWIFT code of the senderâ€™s bank.  
    - Example value: `"BBMEAEADXXX"`

  - **depositDetails** <font color='#7d8793'>String</font>  
    - Additional details or remarks about the deposit.  
    - Example value: `"REF AEV260832YLQ4K5D FIS 56057df891a0449584dc5c8d84a6a138"`

  - **transactionTime** <font color='#7d8793'>Number</font> <font color='#f19938'>Required</font>  
    - Timestamp of the transaction in milliseconds since epoch.  
    - Example value: `1727701521000`

  - **status** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
    - Status of the deposit transaction.  
    - Example value: `"SUCCESS"`

- **_input_charset** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
  - Character encoding used in the request.  
  - Example value: `"UTF-8"`

- **notify_timestamp** <font color='#7d8793'>Number</font> <font color='#f19938'>Required</font>  
  - Timestamp when the notification was generated, in milliseconds since epoch.  
  - Example value: `1735006658869`

- **notify_id** <font color='#7d8793'>String</font> <font color='#f19938'>Required</font>  
  - Unique identifier for the notification.  
  - Example value: `"202409300013926551"`

## Notification Sample

```json
// Http Header
{
    "Content-Type": "application/json; charset=UTF-8"
}

// Http Body
{
    "notify_time": "20241224061738",
    "vamDepositOrder": {
        "remitterInfo": "MR HUA JIANG",
        "amount": {
            "amount": 3000,
            "currency": "AED"
        },
        "orderNo": "131727701521486397",
        "referenceNo": "UFOC0HQ008",
        "senderBankCode": "BBMEAEADXXX",
        "depositDetails": "REF AEV260832YLQ4K5D FIS 56057df891a0449584dc5c8d84a6a138",
        "transactionTime": 1727701521000,
        "status": "SUCCESS"
    },
    "_input_charset": "UTF-8",
    "notify_timestamp": 1735006658869,
    "notify_id": "202409300013926551"
}
```

## Response Format

Upon receiving the notification, the merchant must respond with:

```json
{"response": "SUCCESS"}
```

Any other response will be treated as a failure.
