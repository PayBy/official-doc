<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Online Payment Integration/Checkout/inapp-sdk-android">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Integrate PayBy and Accept Payment RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Integrate PayBy and Accept Payment Atom Feed"><title data-rh="true">In-App SDK for Android | Integrate PayBy and Accept Payment</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developers.payby.com/docs/Online Payment Integration/Checkout/inapp-sdk-android"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="In-App SDK for Android | Integrate PayBy and Accept Payment"><meta data-rh="true" name="description" content="Payers will have the almost the same operation process for using In-APP and Paypage. The difference is that if the mobile client integrates the sdk, users will get a smoother experience when paying on the native page than a web page."><meta data-rh="true" property="og:description" content="Payers will have the almost the same operation process for using In-APP and Paypage. The difference is that if the mobile client integrates the sdk, users will get a smoother experience when paying on the native page than a web page."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developers.payby.com/docs/Online Payment Integration/Checkout/inapp-sdk-android"><link data-rh="true" rel="alternate" href="https://developers.payby.com/docs/Online Payment Integration/Checkout/inapp-sdk-android" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.payby.com/docs/Online Payment Integration/Checkout/inapp-sdk-android" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6f4d6fcb.css">
<link rel="preload" href="/assets/js/runtime~main.71a8f5c7.js" as="script">
<link rel="preload" href="/assets/js/main.72851289.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="PayBy Developer Website" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="PayBy Developer Website" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Developer</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/createorder">APIs</a><a class="navbar__item navbar__link" href="/demos/overview">Demos</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/General/integration-guide">General</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Online Payment Integration/overview">Online Payment Integration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Online Payment Integration/Checkout/hosted-paypage">Checkout</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/Checkout/hosted-paypage">Hosted Paypage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/Checkout/iframe-paypage">iFrame Paypage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Online Payment Integration/Checkout/inapp-sdk-android">In-App SDK for Android</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/Checkout/inapp-sdk-ios">In-App SDK for iOS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Online Payment Integration/Special Payment Scenes/ewallet">Special Payment Scenes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/best-practice">Best Practices of Payment Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Online Payment Integration/test-case">Test Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/revoke">Payment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/refund">Refund</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Transfer to bank/list-countries-and-currencies">Transfer to bank</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Transfer/">Transfer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Reconciliation/statement-download">Reconciliation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SDKs/inapp">SDKs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Member/get-balance">Member</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Transfer to Bank Card/verify-card-payout-eligibility">Transfer to Bank Card</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Online Payment Integration</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Checkout</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">In-App SDK for Android</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>In-App SDK for Android</h1><p>Payers will have the almost the same operation process for using <strong>In-APP</strong> and <strong>Paypage</strong>. The difference is that if the mobile client integrates the sdk, users will get a smoother experience when paying on the native page than a web page.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-experience">User Experience<a class="hash-link" href="#user-experience" title="Direct link to heading">​</a></h2><ol><li>When customers are ready to complete their payment, your mobile application creates a new order creation request.</li><li>The PayBy returns a URL that that redirects customers to a checkout.</li><li>Customers enter their payment details on the checkout and complete the transaction.</li><li>If the payment is completed, customers will be redirected to the merchant&#x27;s success page.<br></li></ol><p><img loading="lazy" alt="card-ue" src="/assets/images/card-ue-hosted-e629ee3be589dba0396d16510aaa1850.png" width="1481" height="1000" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-interaction">System Interaction<a class="hash-link" href="#system-interaction" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="inappflow" src="/assets/images/inapp-633444862ed69152de709c4dc1118774.png" width="1125" height="1957" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sdk">SDK<a class="hash-link" href="#sdk" title="Direct link to heading">​</a></h2><p><a href="https://github.com/PayBy/PayBy-inApp-Android" target="_blank" rel="noopener noreferrer">Link</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="term-definition">Term Definition<a class="hash-link" href="#term-definition" title="Direct link to heading">​</a></h2><ul><li><p><strong>IAPDeviceId</strong><br>
<!-- -->A unique identifier assigned to each device.</p></li><li><p><strong>IAPPartnerId</strong><br>
<!-- -->A unique identifier assigned to each merchant during the application process for the payment service.</p></li><li><p><strong>IAPAppId</strong><br>
<!-- -->A unique identifier assigned to each application of a merchant during the application process for the payment service.</p></li><li><p><strong>OrderToken</strong><br>
<!-- -->A token that encapsulates order-related information.</p></li><li><p><strong>IAPSign</strong><br>
<!-- -->A digital signature generated in two steps:</p><ol><li><p><strong>Sign String Construction</strong>: Create a string by concatenating the parameters in the following order:  </p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">signString = &quot;iapAppId=&quot; + iapAppId + </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">             &quot;&amp;iapDeviceId=&quot; + iapDeviceId + </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">             &quot;&amp;iapPartnerId=&quot; + iapPartnerId + </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">             &quot;&amp;token=&quot; + token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div></li><li><p><strong>Signing Process</strong>: Encrypt the <code>signString</code> using a private key. The encryption rules are detailed in the provided demo.</p></li></ol></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-dependencies">Add Dependencies<a class="hash-link" href="#add-dependencies" title="Direct link to heading">​</a></h2><p>Use gradle to add dependencies,and also add manifestPlaceholders for downloading APK.</p><p><strong>Step 1: Add Repositories</strong></p><p>Add the Maven repository address in <code>build.gradle</code> at the root directory of your project:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">buildscript {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    repositories {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        google()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        jcenter()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        maven {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            credentials {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                username &#x27;dev&#x27;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                password &#x27;dev@123&#x27;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            url(&quot;http://nexus.payby.com/repository/android-release/&quot;)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        }  </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">allprojects {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    repositories {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        google()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        jcenter()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        maven {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            credentials {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                username &#x27;dev&#x27;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                password &#x27;dev@123&#x27;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            url(&quot;http://nexus.payby.com/repository/android-release/&quot;)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        }  </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><hr><p><strong>Step 2: Add Library</strong></p><p>If your project uses AndroidX, add the following lines to <code>gradle.properties</code>:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">android.useAndroidX=true</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">android.enableJetifier=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><p>Then add the AndroidX library dependency in the <code>build.gradle</code> file of the app module:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    def iap_version = &quot;2.0.6-RELEASE&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    implementation &quot;com.payby.android.module.iap:lib-iap-view:${iap_version}&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><p>If your project uses Android Support, use the same dependency block:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    def iap_version = &quot;2.0.6-RELEASE&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    implementation &quot;com.payby.android.module.iap:lib-iap-view:${iap_version}&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><hr><p><strong>Step 3: Add Placeholder</strong></p><p>Add the <code>manifestPlaceholders</code> key-value pair. The key is <code>PACKAGENAME</code> and the value is your current application package name. This is required for Android to read and write files via <code>FileProvider</code>. Also, enable Java 8 compilation support:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    defaultConfig {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        applicationId &quot;com.payby.android.payment.iap.sample&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        manifestPlaceholders = [</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            PACKAGENAME: &quot;com.payby.android.payment.iap.sample&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    compileOptions {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        sourceCompatibility JavaVersion.VERSION_1_8</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        targetCompatibility JavaVersion.VERSION_1_8</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><blockquote><p><strong>Note:</strong> If <code>FileProvider</code> is already used in your project, ensure the <code>android:authorities</code> attribute is set to <code>${PACKAGENAME}</code> in the manifest:</p></blockquote><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token tag punctuation" style="color:#b6ad9a">&lt;</span><span class="token tag" style="color:#063289">manifest</span><span class="token tag" style="color:#063289"> </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#896724">android</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">http://schemas.android.com/apk/res/android</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">    </span><span class="token tag attr-name" style="color:#896724">package</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">com.payby.android.payment.iap.sample</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token tag punctuation" style="color:#b6ad9a">&lt;</span><span class="token tag" style="color:#063289">application</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token tag punctuation" style="color:#b6ad9a">&lt;</span><span class="token tag" style="color:#063289">provider</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">            </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">androidx.core.content.FileProvider</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">            </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">authorities</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">${PACKAGENAME}</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">            </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">exported</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">false</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">            </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">grantUriPermissions</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">true</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token tag punctuation" style="color:#b6ad9a">&lt;</span><span class="token tag" style="color:#063289">meta-data</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">                </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">android.support.FILE_PROVIDER_PATHS</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token tag" style="color:#063289">                </span><span class="token tag attr-name namespace" style="color:#896724;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#896724">resource</span><span class="token tag attr-value punctuation attr-equals" style="color:#b6ad9a">=</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag attr-value" style="color:#728fcb">@xml/file_paths</span><span class="token tag attr-value punctuation" style="color:#b6ad9a">&quot;</span><span class="token tag" style="color:#063289"> </span><span class="token tag punctuation" style="color:#b6ad9a">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token tag punctuation" style="color:#b6ad9a">&lt;/</span><span class="token tag" style="color:#063289">provider</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token tag punctuation" style="color:#b6ad9a">&lt;/</span><span class="token tag" style="color:#063289">application</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token tag punctuation" style="color:#b6ad9a">&lt;/</span><span class="token tag" style="color:#063289">manifest</span><span class="token tag punctuation" style="color:#b6ad9a">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="declare-permissions">Declare Permissions<a class="hash-link" href="#declare-permissions" title="Direct link to heading">​</a></h2><p>Declare the necessary permissions in manifest, including:</p><ol><li>INTERNET: allows an application to download files.</li><li>Read/Write SD card: allows an application to read from / write to external storage.</li><li>Install Package: allows an application to install packages.</li></ol><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    package=&quot;com.payby.android.payment.iap.sample&quot;&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;uses-permission android:name=&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;/&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;application</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">       ...</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &lt;/application&gt;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">&lt;/manifest&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><p>If your project <code>targetVersion</code> is 30, you also need to declare the following permission in the manifest. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parameter-preparation">Parameter Preparation<a class="hash-link" href="#parameter-preparation" title="Direct link to heading">​</a></h2><p>The payment parameter descriptions and methods to get are as follows. The following parameters can be used to construct a <strong>PayTask</strong> object, which describes a payment task, by calling <strong>pay (PayTask task, Environment env)</strong> method in <strong>PbManager</strong> to complete payment.</p><table><thead><tr><th>Name</th><th>Descriptioin</th><th>How to get</th></tr></thead><tbody><tr><td>iapDeviceId</td><td>Unique identification of device</td><td>It is from the api in IAP SDK</td></tr><tr><td>iapPartnerId</td><td>partnerId</td><td>It is assigned when a merchant applies for the payment service</td></tr><tr><td>token</td><td>orderToken</td><td>After placing an order, you can get it from the response</td></tr><tr><td>iapAppId</td><td>appId</td><td>It is assigned when a merchant applies for the payment service</td></tr><tr><td>iapSign</td><td>Signature information after signing iapDeviceId, iapPartnerId, token, iapAppId</td><td>It is generated by signing the signature string according to the signing rules. For the signing string signing sequence and rules, see <em>Term Definition</em></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use">How To Use<a class="hash-link" href="#how-to-use" title="Direct link to heading">​</a></h2><hr><p><strong>Step 1: Generate IAPDeviceId</strong></p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">// If your payment page is Activity, just pass in this, but if it is Fragment, you should pass in getActivity()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">PbManager manager = PbManager.getInstance(this);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">String mIapDeviceId = manager.getIAPDeviceID();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><blockquote><p><strong>Note:</strong> When placing an order and paying for the order, the IapDeviceId must not be different.</p></blockquote><hr><p><strong>Step 2: Place an Order</strong></p><p>Place the order through your server. After placing the order, retrieve the <code>token</code> and <code>iapSign</code> from the server response.</p><hr><p><strong>Step 3: Set the Payment Listener</strong></p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">// Register the payment callback listener</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">manager.onPayResultListener = this;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><hr><p><strong>Step 4: Pay</strong></p><p>Construct a <code>PayTask</code> object using the following parameters in order:</p><ol><li><code>token</code>: Represents the order token.</li><li><code>iapDeviceId</code>: Unique identifier for the device.</li><li><code>iapPartnerId</code>: Identifier for the merchant.</li><li><code>iapSign</code>: Signature generated using the private key.</li><li><code>iapAppId</code>: Identifier for the merchant&#x27;s app.</li></ol><p>Initiate the payment using the <code>pay</code> method of the <code>PbManager</code> object. Choose the appropriate environment:</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">// Development environment</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">PayTask task = PayTask.with(mToken, mIapDeviceId, mPartnerId, mSign, mIapAppId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">manager.pay(task, Environment.DEV);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">// UAT (User Acceptance Testing) environment</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">PayTask task = PayTask.with(mToken, mIapDeviceId, mPartnerId, mSign, mIapAppId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">manager.pay(task, Environment.UAT);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">// Production environment</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">PayTask task = PayTask.with(mToken, mIapDeviceId, mPartnerId, mSign, mIapAppId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">manager.pay(task, Environment.PRO);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div><hr><p><strong>Step 5: Get the Payment Result</strong></p><p>Implement the <code>OnPayResultListener</code> interface and override the <code>onGetPayState(String result)</code> method to handle the payment result.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="payment-result-code-description">Payment Result Code Description<a class="hash-link" href="#payment-result-code-description" title="Direct link to heading">​</a></h3><ul><li><code>SUCCESS</code>: Payment completed successfully and received by the payee.</li><li><code>FAIL</code>: Payment failed.</li><li><code>PAID</code>: Payment made by the payer; awaiting confirmation from the payee.</li><li><code>PAYING</code>: Payment is being processed; final result pending.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proguard-rules">Proguard-rules<a class="hash-link" href="#proguard-rules" title="Direct link to heading">​</a></h2><p>-keep class com.payby.android.iap.domain.value*<em>{ </em>; }</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample">Sample<a class="hash-link" href="#sample" title="Direct link to heading">​</a></h2><p>Taking the integration of AndroidX dependency library as an example, the complete payment process sample code is as follows. It should be noted that in the actual development process, you need to make your order payment interface to implement the <strong>OnPayResultListener</strong> interface, the order payment interface can be an Activity or a Fragment. Here MainActivity will be used as an example to simulate the payment process.</p><div><div class="block__container-div"><div class="block__container__mask-div"></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">public class MainActivity extends AppCompatActivity implements OnPayResultListener {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  EditText et_sign, et_token, et_id, et_deviceId,et_app_id;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  Button pay;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private PbManager manager;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private String mToken;  //tokenUrl   </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private String mPartnerId;  //partnerId</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private String mSign;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private String mIapDeviceId;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private String mIapAppId;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  protected void onCreate(Bundle savedInstanceState) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    super.onCreate(savedInstanceState);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    setContentView(R.layout.activity_main);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    pay = findViewById(R.id.pay);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_sign = findViewById(R.id.et_sign);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_token = findViewById(R.id.et_token);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_id = findViewById(R.id.et_id);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_deviceId = findViewById(R.id.et_deviceId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_app_id = findViewById(R.id.et_app_id);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">   // Step 1: get PbManager and generate IapDeviceId</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    manager = PbManager.getInstance(this);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">   //Step 2: generate the iapDeviceId</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    String iapDeviceID = manager.getIAPDeviceID();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    et_deviceId.setText(iapDeviceID);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">   // Step 3: set the payment result listener</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    manager.onPayResultListener = this;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    pay.setOnClickListener(new View.OnClickListener() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      public void onClick(View v) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        startPay();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain"> </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  //Step 4: start to pay</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  private void startPay() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mToken = et_token.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mPartnerId = et_id.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mIapDeviceId = et_deviceId.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mSign = et_sign.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mAppId = et_app_id.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    if (TextUtils.isEmpty(mToken)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mPartnerId)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mIapDeviceId)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mSign)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mAppId)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      Toast.makeText(this, &quot;parameter should not be null&quot;, Toast.LENGTH_SHORT).show();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      return;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    // support DEV/UAT/PRO </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    PayTask task = PayTask.with(mToken, mIapDeviceId, mPartnerId, mSign, mAppId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    manager.pay(task, Environment.UAT);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    //also,you can use the other method to pay</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    //manager.payWithOrderCallback(this);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    // after calling this method,the loading dialog will not be canceled until getting the paying app list.you need implement the method onOrder,in the method,you can pass the order information to SDK by successCallback.</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  public void onGetPayState(String s) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">       // Step 5: get the payment result and do different processing according to different payment result status</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    if (TextUtils.equals(result, &quot;SUCCESS&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      // Successful, the payment has been received, the transaction is over</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    } else if (TextUtils.equals(result, &quot;PAID&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      // The payer has successfully paid and is waiting for the payee to receive the payment</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    } else if (TextUtils.equals(result, &quot;PAYING&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      // The payment is being processed</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    } else if (TextUtils.equals(result, &quot;FAIL&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      // Payment failed</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      // Other unknown errors</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  public void onGetProtocolState(String protocolState) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    //PROTOCOL-SUCCESS,PROTOCOL-FAIL</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    if (TextUtils.equals(protocolState, &quot;PROTOCOL-SUCCESS&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      //success......</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    } else if (TextUtils.equals(protocolState, &quot;PROTOCOL-FAIL&quot;)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      //fail.....</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  public void onOrder(OnOrderSuccessCallback onOrderSuccessCallback, OnOrderFailCallback onOrderFailCallback) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  //Tips:if you call method manager.pay(task,environment),do nothing here.   </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  // if call method manager.payWithOrderCallback(this),you can do the following codes show.</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  // step1:in here,you need get order information by placing order.</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  // step2:construct a PayTask with the order information</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  // step3: if success,pass the order information to sdk with OnOrderSuccessCallback,if fail,just notify SDK the state with OnOrderFailCallback</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain"> // the following code simulates the process of placing order and pass the parameter to sdk</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mToken = et_token.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mPartnerId = et_id.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mIapDeviceId = et_deviceId.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mSign = et_sign.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    mAppId = et_app_id.getText().toString().trim();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    if (TextUtils.isEmpty(mToken)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mPartnerId)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mIapDeviceId)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mSign)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        || TextUtils.isEmpty(mAppId)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      Toast.makeText(this, &quot;parameter should not be null&quot;, Toast.LENGTH_SHORT).show();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      return;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    // </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">//    String signString =&quot;iapAppId=&quot;+mAppId+ &quot;&amp;iapDeviceId=&quot; + mIapDeviceId+ &quot;&amp;iapPartnerId=&quot; + mPartnerId+&quot;&amp;token=&quot; + mToken ;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">//    String sign = Base64.encode(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">//        RsaUtils.sign(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">//            signString, StandardCharsets.UTF_8, RsaUtils.getPrivateKey(privateKay)));</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    if (!TextUtils.isEmpty(mToken)) {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      String signString = &quot;iapAppId=&quot; + mAppId + &quot;&amp;iapDeviceId=&quot; + mIapDeviceId + &quot;&amp;iapPartnerId=&quot; + mPartnerId + &quot;&amp;token=&quot; + mToken;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      String sign = Base64.encode(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">          RsaUtils.sign(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">              signString, StandardCharsets.UTF_8, RsaUtils.getPrivateKey(keyDev)));</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      PayTask task = PayTask.with(mToken, mIapDeviceId, mPartnerId, sign, mAppId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      new Handler().postDelayed(new Runnable() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        public void run() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">          onOrderSuccessCallback.onSuccess(task, Environment.DEV);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      }, 3000);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      new Handler().postDelayed(new Runnable() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        public void run() {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">          onOrderFailCallback.onFail();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">      }, 4000);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span class="block__toggle-span"><svg xmlns="http://www.w3.org/2000/svg" class="holder" viewBox="0 0 1024 1024" width="28" fill="#999999"><path d="M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg></span></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Online Payment Integration/Checkout/iframe-paypage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">iFrame Paypage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Online Payment Integration/Checkout/inapp-sdk-ios"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">In-App SDK for iOS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#user-experience" class="table-of-contents__link toc-highlight">User Experience</a></li><li><a href="#system-interaction" class="table-of-contents__link toc-highlight">System Interaction</a></li><li><a href="#sdk" class="table-of-contents__link toc-highlight">SDK</a></li><li><a href="#term-definition" class="table-of-contents__link toc-highlight">Term Definition</a></li><li><a href="#add-dependencies" class="table-of-contents__link toc-highlight">Add Dependencies</a></li><li><a href="#declare-permissions" class="table-of-contents__link toc-highlight">Declare Permissions</a></li><li><a href="#parameter-preparation" class="table-of-contents__link toc-highlight">Parameter Preparation</a></li><li><a href="#how-to-use" class="table-of-contents__link toc-highlight">How To Use</a><ul><li><a href="#payment-result-code-description" class="table-of-contents__link toc-highlight">Payment Result Code Description</a></li></ul></li><li><a href="#proguard-rules" class="table-of-contents__link toc-highlight">Proguard-rules</a></li><li><a href="#sample" class="table-of-contents__link toc-highlight">Sample</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 PayBy, Inc. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.71a8f5c7.js"></script>
<script src="/assets/js/main.72851289.js"></script>
</body>
</html>